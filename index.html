<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoodEats - What's for dinner?</title>

    <!-- Tailwind CSS & DaisyUI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.2/dist/full.min.css" rel="stylesheet" type="text/css" />

    <!-- Fuse.js for fuzzy search -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>

    <!-- Custom styles -->
    <link href="src/css/styles.css" rel="stylesheet">
</head>
<body class="bg-base-200 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <h1 class="text-4xl font-bold text-center mb-8">üçΩÔ∏è MoodEats</h1>

        <!-- Tabs -->
        <div class="tabs tabs-boxed mb-6">
            <a id="planTab" class="tab tab-active">üìÖ Plan</a>
            <a id="browseTab" class="tab">üéØ Browse</a>
        </div>

        <!-- Browse View -->
        <div id="browseView" class="hidden">
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title">What's your mood?</h2>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
                        <button class="mood-btn btn btn-outline" data-mood="cozy">üî• Cozy</button>
                        <button class="mood-btn btn btn-outline" data-mood="fresh">ü•ó Fresh</button>
                        <button class="mood-btn btn btn-outline" data-mood="hearty">üí™ Hearty</button>
                        <button class="mood-btn btn btn-outline" data-mood="quick">‚ö° Quick</button>
                        <button class="mood-btn btn btn-outline" data-mood="asian">ü•¢ Asian</button>
                        <button class="mood-btn btn btn-outline" data-mood="italian">üçù Italian</button>
                        <button class="mood-btn btn btn-outline" data-mood="seafood">üêü Seafood</button>
                        <button class="mood-btn btn btn-outline" data-mood="breakfast">üåÖ Breakfast</button>
                    </div>
                </div>
            </div>

            <div id="suggestionsArea" class="hidden">
                <div class="card bg-base-200">
                    <div class="card-body">
                        <h3 class="card-title text-lg">Suggestions</h3>
                        <div id="mealSuggestions" class="space-y-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Plan View -->
        <div id="planView">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold">üìÖ Today's Plan</h2>
                <div class="text-sm text-base-content/60">
                    <span id="currentDate"></span>
                </div>
            </div>

            <!-- Meal Slots -->
            <div class="space-y-4">
                <!-- Breakfast -->
                <div class="card bg-base-200">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-2">
                            <h3 class="text-lg font-semibold">üåÖ Breakfast</h3>
                            <button class="btn btn-xs btn-outline" onclick="selectMealForSlot('breakfast')">
                                <span id="breakfast-btn-text">Select</span>
                            </button>
                        </div>
                        <div id="breakfast-slot" class="min-h-[60px] p-3 bg-base-100 rounded-lg">
                            <p class="text-base-content/40">Tap select to choose breakfast</p>
                        </div>
                    </div>
                </div>

                <!-- Lunch -->
                <div class="card bg-base-200">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-2">
                            <h3 class="text-lg font-semibold">‚òÄÔ∏è Lunch</h3>
                            <button class="btn btn-xs btn-outline" onclick="selectMealForSlot('lunch')">
                                <span id="lunch-btn-text">Select</span>
                            </button>
                        </div>
                        <div id="lunch-slot" class="min-h-[60px] p-3 bg-base-100 rounded-lg">
                            <p class="text-base-content/40">Tap select to choose lunch</p>
                        </div>
                    </div>
                </div>

                <!-- Dinner -->
                <div class="card bg-base-200">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-2">
                            <h3 class="text-lg font-semibold">üåô Dinner</h3>
                            <button class="btn btn-xs btn-outline" onclick="selectMealForSlot('dinner')">
                                <span id="dinner-btn-text">Select</span>
                            </button>
                        </div>
                        <div id="dinner-slot" class="min-h-[60px] p-3 bg-base-100 rounded-lg">
                            <p class="text-base-content/40">Tap select to choose dinner</p>
                        </div>
                    </div>
                </div>

                <!-- Snacks -->
                <div class="card bg-base-200">
                    <div class="card-body">
                        <div class="flex items-center gap-3 mb-2">
                            <h3 class="text-lg font-semibold">üçø Snacks</h3>
                            <button class="btn btn-xs btn-outline" onclick="selectMealForSlot('snacks')">
                                <span id="snacks-btn-text">Select</span>
                            </button>
                        </div>
                        <div id="snacks-slot" class="min-h-[60px] p-3 bg-base-100 rounded-lg">
                            <p class="text-base-content/40">Tap select to choose snacks</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Daily Totals -->
            <div class="card bg-primary/5 border-2 border-primary">
                <div class="card-body">
                    <h3 class="text-lg font-semibold mb-3">üìä Daily Totals</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold" id="totalProtein">0g</div>
                            <div class="text-xs text-base-content/60">Protein</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold" id="totalCarbs">0g</div>
                            <div class="text-xs text-base-content/60">Carbs</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold" id="totalFat">0g</div>
                            <div class="text-xs text-base-content/60">Fat</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold" id="totalCalories">0</div>
                            <div class="text-xs text-base-content/60">Calories</div>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-base-200 rounded-lg">
                        <div class="flex justify-between items-center">
                            <span class="font-semibold">Runner Score:</span>
                            <div>
                                <span id="runnerScore" class="font-bold text-green-600">0</span>
                                <span class="text-sm">/10</span>
                            </div>
                        </div>
                        <p class="text-xs text-base-content/60 mt-1" id="scoreText">Add meals to see your score!</p>
                    </div>
                    <div class="flex gap-2 mt-4">
                        <button class="btn btn-sm btn-primary" onclick="saveDailyPlan()">üíæ Save Plan</button>
                        <button class="btn btn-sm btn-ghost" onclick="clearDailyPlan()">üóëÔ∏è Clear All</button>
                    </div>
                </div>
            </div>

            <div id="savedPlans" class="hidden">
                <div class="card bg-base-200/50">
                    <div class="card-body">
                        <h4 class="font-semibold text-sm mb-2">Recent Plans</h4>
                        <div id="savedPlansList" class="space-y-2"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Meal Selection Modal -->
        <dialog id="mealModal" class="modal">
            <div class="modal-box max-w-3xl">
                <h3 id="modalTitle" class="font-bold text-lg mb-4">Select Meal</h3>

                <!-- Quick filters for modal -->
                <div class="flex gap-2 mb-4 flex-wrap">
                    <button class="modal-filter btn btn-sm btn-outline" data-filter="all">All</button>
                    <button class="modal-filter btn btn-sm btn-outline" data-filter="quick">Quick</button>
                    <button class="modal-filter btn btn-sm btn-outline" data-filter="hearty">Hearty</button>
                    <button class="modal-filter btn btn-sm btn-outline" data-filter="fresh">Fresh</button>
                </div>

                <input
                    type="text"
                    id="modalSearch"
                    placeholder="Search meals..."
                    class="input input-bordered w-full mb-4"
                >

                <!-- Manual Entry Section -->
                <div class="collapse collapse-arrow bg-base-200 mb-4">
                    <input type="checkbox" />
                    <div class="collapse-title text-sm font-medium">
                        Or type your own meal
                    </div>
                    <div class="collapse-content">
                        <input
                            type="text"
                            id="manualMealName"
                            class="input input-bordered input-sm w-full mb-2"
                            placeholder="Enter meal name (e.g., Leftover pizza, Protein shake)"
                        />
                        <button class="btn btn-sm btn-primary" onclick="addManualMeal()">
                            Add Custom Meal
                        </button>
                    </div>
                </div>

                <div id="modalMeals" class="space-y-2 max-h-96 overflow-y-auto">
                    <!-- Meals will be loaded here -->
                </div>

                <div class="modal-action">
                    <button class="btn" onclick="mealModal.close()">Cancel</button>
                </div>
            </div>
        </dialog>
    </div>

    <!-- Load JavaScript modules -->
    <script src="dist/moodeats-bundle.js"></script>
</body>
</html>